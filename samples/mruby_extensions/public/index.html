<!DOCTYPE html>
<html>
<header>
  <title>Page titles are enabled!</title>
  <style>
    table {
      border-collapse: collapse;
    }
    table, th, td {
      border: 1px solid black;
    }
    td {
      padding: 5px;
    }
  </style>
</header>
<body>
<div>
  <table id="table">
    <thead>
      <th>Ruby Expression</th><th>JavaScript Value</th>
    </thead>
  </table>
</div>
<script>
  function test(code, value) {
    window.table.innerHTML = window.table.innerHTML +
      "<tr><td><pre><code>" + code + "</code></pre></td><td>" + value + "</td></tr>"
  }
  test('V8.create_undefined', window.rbUndefined);
  test('V8.create_null', window.rbNull);
  test('V8.create_bool true', window.rbTrue);
  test('V8.create_bool false', window.rbFalse);
  test('V8.create_bool 1', window.rbTruthy);
  test('V8.create_bool nil', window.rbFalsy);
  test('V8.create_int 3', window.rbInt);
  test('V8.create_float 4.5', window.rbFloat);
  test('V8.create_string "Hello, from mruby!"', window.rbString);
  test(
    'V8.window[:rbObject] = V8.create_object \n' +
    'V8.window[:rbObject][:myRubyClass] = V8.create_string(V8.window[:rbObject].class.to_s)',
    JSON.stringify(window.rbObject)
  );
  test('V8.exec "window.rbExecValue = \'javascript string literal\'"', window.rbExecValue);
  test(
    'V8.window[:rbFunction] = V8.create_function "rbFunction" do |arguments| \n' +
    '  arg1 = arguments[:shift].call(arguments, []) \n' +
    '  V8.window[:alert].call(V8.window, [arg1]) \n' +
    'end',
    '<button onclick="window.rbFunction(\'js -> rb -> js\')">window.rbFunction(\'js -> rb -> js\')</button>'
  )
  test('Use browser to debug exceptions', window.rbException);
</script>
</body>
</html>
